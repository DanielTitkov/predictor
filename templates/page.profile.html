{{ define "title" }} Crowdsourced predictions {{ end }}
{{ define "view" }}
<main>
  {{ template "back-to-home" }}
  {{ if .User }}
  <div class="section">
    <div class="columns">
      <div class="column is-4">
        <div class="block">
          <figure class="image is-128x128">
            <img class="is-rounded" src="{{ .User.Picture }}" alt="userpic">
          </figure>
        </div>
        <div class="block has-text-left">
          <p>
            <b>–ò–º—è: </b>
            <span>{{ .User.Name }}</span>
          </p>
          <p>
            <b>Email: </b>
            <span>{{ .User.Email }}</span>
          </p>
          <p>
            <b>–Ø–∑—ã–∫: </b>
            <span>{{ .User.Locale }}</span>
          </p>
        </div>
      </div>
      <div class="column">
        <div class="box notification has-background-white">

          <h3 class="title is-3 is-size-5-mobile has-text-centered">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
          <progress class="progress is-large user-summary-meter" value="{{ .UserSummary.PercCorrect }}" max="100">{{
            .UserSummary.PercCorrect }}%</progress>
          <hr>
          <div class="columns is-mobile is-size-4 is-size-6-mobile">
            <div class="column has-text-weight-semibold">
              –í–µ—Ä–Ω–æ
            </div>
            <div class="column is-3 has-text-right">
              {{ .UserSummary.PercCorrect }}%
            </div>
            <div class="column is-3 has-text-right">
              ({{ .UserSummary.CorrectPredictions }})
            </div>
          </div>
          <div class="columns is-mobile is-size-4 is-size-6-mobile">
            <div class="column has-text-weight-semibold">
              –ù–µ–≤–µ—Ä–Ω–æ
            </div>
            <div class="column is-3 has-text-right">
              {{ .UserSummary.PercIncorrect }}%
            </div>
            <div class="column is-3 has-text-right">
              ({{ .UserSummary.IncorrectPredictions }})
            </div>
          </div>
          <hr>
          <div class="columns is-mobile is-size-5 is-size-6-mobile">
            <div class="column has-text-weight-semibold">
              –û–∂–∏–¥–∞—é—Ç
            </div>
            <div class="column is-3 has-text-right">
            </div>
            <div class="column is-3 has-text-right">
              {{ .UserSummary.UnknownPredictions }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="section">
    <h1 class="title is-3 has-text-centered">–ê—á–∏–≤–∫–∏</h1>
    {{ template "badge-selector" }}
  </div> -->
  <div class="section" id="challenges">
    <h1 class="title is-3 is-size-5-mobile has-text-centered">–í–∞—à–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</h1>
    <div class="tabs is-large is-centered">
      <ul>
        <li class="{{ if .CreateChallengeForm }}is-active{{end}}">
          <a live-click="create-new" title="create-challenge">
            <i class="bi bi-file-earmark-plus"></i>
            <span class="is-hidden-mobile ml-1">–°–æ–∑–¥–∞—Ç—å</span>
          </a>
        </li>
        <li class="{{ if .FilterArgs.Finished }}is-active{{end}}">
          <a live-click="select-finished" title="finished-challenges">
            <i class="bi bi-file-check"></i>
            <span class="is-hidden-mobile ml-1">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</span>
          </a>
        </li>
        <li class="{{ if .FilterArgs.Ongoing }}is-active{{end}}">
          <a live-click="select-ongoing" title="ongoing-challenges">
            <i class="bi bi-file-earmark-medical"></i>
            <span class="is-hidden-mobile ml-1">–û—Ç–∫—Ä—ã—Ç—ã–µ</span>
          </a>
        </li>
        <li class="{{ if .ShowMine }}is-active{{end}}">
          <a live-click="select-mine" title="my-challenges">
            <i class="bi bi-file-earmark-person"></i>
            <span class="is-hidden-mobile ml-1">–ú–æ–∏</span>
          </a>
        </li>
      </ul>
    </div>
    {{ if .CreateChallengeForm }}
    <!-- if create challenge -->
    <div class="block">
      {{ if .CreatedChallenge }}
      <div class="block">
        <p class="title is-4 has-text-centered">Created challenge</p>
        {{ template "challenge-list-item" .CreatedChallenge }}
      </div>
      {{ else }}
      <form id="create-challenge-form" live-submit="create-new-submit" live-change="create-new-validate">
        <h4 class="title is-4 is-size-5-mobile">
          –°–æ–∑–¥–∞—Ç—å <span class="is-hidden-mobile">–ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ</span>
        </h4>
        <div class="field">
          <div class="box notification has-background-white">
            <div class="content">
              <p><b>–ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π</b></p>
              <ul>
                <li>–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∫–∞—Å–∞—Ç—å—Å—è –∫–∞–∫–∏—Ö-—Ç–æ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –∑–Ω–∞—á–∏–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.</li>
                <li>–ò—Å—Ö–æ–¥ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–æ–º—É-–ª–∏–±–æ –Ω–∞ –º–æ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è.</li>
                <li>–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–π –∏ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–π.</li>
                <li>–î–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—ã–±—Ä–∞–Ω—ã —Ç–∞–∫, —á—Ç–æ–±—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –î–û —Ç–æ–≥–æ –∫–∞–∫ –∏—Å—Ö–æ–¥ –±—É–¥–µ—Ç —è—Å–µ–Ω.</li>
              </ul>
              <p>
                –ü–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π –≤—Å–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é.
                –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∞–π—Ç–∞ –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞–∫ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è, —Ç–∞–∫ –∏ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏
                –∫–æ–Ω—Ü–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è.
              </p>
              <p>
                –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤—ã —Å–º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –µ–≥–æ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ú–æ–∏" –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.
                –ï—Å–ª–∏ –≤–∞—à–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–æ–π–¥—ë—Ç –º–æ–¥–µ—Ä–∞—Ü–∏—é, —Ü–≤–µ—Ç –µ–≥–æ —Ñ–æ–Ω–∞ —Å–º–µ–Ω–∏—Ç—Å—è —Å —Å–µ—Ä–æ–≥–æ –Ω–∞ —Å–∏–Ω–∏–π.
              </p>
            </div>
          </div>
          {{ if .FormError }}
          <div class="block">
            <p class="title is-5 is-size-6-mobile has-text-danger">
              {{ .FormError.Error }}
            </p>
          </div>
          {{ end }}
          <label class="label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</label>
          <p class="heading">
            –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–æ –≤ –≤–∏–¥–µ —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è.
            <br>
            –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –¥–ª–∏–Ω–µ - 140 —Å–∏–º–≤–æ–ª–æ–≤.
          </p>
          <div class="control">
            <input class="input" name="content" live-debounce="blur" type="text" placeholder="Content">
          </div>
        </div>
        <div class="field">
          <label class="label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <p class="heading">
            –ü–æ—è—Å–Ω–µ–Ω–∏–µ –Ω–∞—Å—á—ë—Ç —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è - —É—Å–ª–æ–≤–∏—è, –¥–µ—Ç–∞–ª–∏, —É—Ç–æ—á–Ω–µ–Ω–∏—è.
            <br>
            –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –¥–ª–∏–Ω–µ - 280 —Å–∏–º–≤–æ–ª–æ–≤.
          </p>
          <div class="control">
            <input class="input" name="description" live-debounce="blur" type="text" placeholder="Description">
          </div>
        </div>
        <div class="columns">
          <div class="column is-6">
            <div class="field">
              <label class="label">–ù–∞—á–∞–ª–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</label>
              <p class="heading">
                –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ 2006-12-31.
                <br>
                –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º.
              </p>
              <div class="control">
                <input class="input" name="start-time" live-debounce="blur" type="text" placeholder="{{ .TimeLayout }}">
              </div>
            </div>
          </div>
          <div class="column is-6">
            <div class="field">
              <label class="label">–ö–æ–Ω–µ—Ü –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</label>
              <p class="heading">
                –î–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ 2006-12-31.
                <br>
                –î–∞—Ç–∞ –∫–æ–Ω—Ü–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ—Å–ª–µ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞.
              </p>
              <div class="control">
                <input class="input" name="end-time" live-debounce="blur" type="text" placeholder="{{ .TimeLayout }}">
              </div>
            </div>
          </div>
        </div>
        {{ if .FormError }}
        <div class="block">
          <p class="title is-5 is-size-6-mobile has-text-danger">
            {{ .FormError.Error }}
          </p>
        </div>
        {{ end }}
        <hr>
        <div class="field is-grouped is-grouped-centered">
          <div class="control">
            <button class="button is-link is-large is-rounded is-hidden-mobile" {{ if .FormError }}disabled{{ end }}>
              –°–æ–∑–¥–∞—Ç—å
            </button>
            <button class="button is-link is-rounded is-hidden-tablet" {{ if .FormError }}disabled{{ end }}>
              –°–æ–∑–¥–∞—Ç—å
            </button>
          </div>
        </div>
      </form>
      {{ end }}
    </div>
    {{ else }}
    <!-- else if create challenge -->
    <div class="level">
      <h4 class="title is-4 is-size-5-mobile">
        {{ if .FilterArgs.Finished }}
        –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ<span class="is-hidden-mobile"> –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</span>:
        {{ end }}
        {{ if .FilterArgs.Ongoing }}
        –û—Ç–∫—Ä—ã—Ç—ã–µ<span class="is-hidden-mobile"> –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</span>:
        {{end}}
        {{ if .ShowMine }}
        –ú–æ–∏<span class="is-hidden-mobile"> –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</span>:
        {{end}}
        {{ .ChallengeCount }}
      </h4>
      <h4 class="subtitle is-5 is-size-6-mobile">–°—Ç—Ä–∞–Ω–∏—Ü–∞ <b>{{ .Page }}</b> –∏–∑ <b>{{ .MaxPage }}</b></h4>
    </div>
    <div class="block">
      {{ template "challenge-list-pagination" . }}
    </div>
    <div class="block">
      {{ if eq .ChallengeCount 0 }}
      <h5 class="title is-5 is-size-6-mobile">–ü–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º</h5>
      {{ else }}
      {{ range $i, $challenge := .Challenges }}
      <div class="columns">
        <div class="column is-8 is-align-self-center">
          {{ template "challenge-list-item" $challenge }}
        </div>
        {{ if $challenge.UserPrediction }}
        <div class="column is-align-self-center">
          <div class="columns is-mobile">
            <div class="column is-narrow is-size-1 is-size-3-mobile is-align-self-center has-text-centered-tablet">
              <p class="is-family-monospace">
                {{ if $challenge.HasOutcome }}
                {{ if eq $challenge.UserPrediction.Prognosis $challenge.HasOutcomeAndTrue }}
                &equals;
                {{ else }}
                &NotEqual;
                {{ end }}
                {{ else }}
                ?
                {{ end }}
              </p>
            </div>
            <div class="column is-narrow is-align-self-center has-text-centered-tablet">
              {{ template "prognosis-tag" $challenge.UserPrediction.Prognosis }}
            </div>
            <div class="column is-narrow is-align-self-center has-text-right is-size-1 is-size-3-mobile">
              {{ if $challenge.HasOutcome }}
              {{ if eq $challenge.UserPrediction.Prognosis $challenge.HasOutcomeAndTrue }}
              ü§©
              {{ else }}
              üôÑ
              {{ end }}
              {{ else }}
              ü•∫
              {{ end }}
            </div>
          </div>
        </div>
        {{ end }}
        <!-- end if user prediction -->
      </div>
      <hr class="is-hidden-tablet">
      {{ end }}
      {{ end }}
    </div>
    <div class="block">
      {{ template "challenge-list-pagination" . }}
    </div>
    {{ end }}
    <!-- end if create challenge -->
  </div>
  {{ end }}
  <!-- end if user -->
</main>
{{ end }}

{{ define "prognosis-tag" }}
<span class="tag px-5 py-6 {{ if . }}prognosis-tag-true{{ else }}prognosis-tag-false{{ end }} is-hidden-mobile">
  <span class="is-size-4 is-size-6-mobile">–ü—Ä–æ–≥–Ω–æ–∑:&nbsp;</span>
  {{ if . }}
  <i class="bi-check-circle-fill is-size-2 is-size-4-mobile"></i>
  {{ else }}
  <i class="bi-x-circle-fill is-size-2 is-size-4-mobile"></i>
  {{ end }}
</span>
<span class="tag px-4 py-5 {{ if . }}prognosis-tag-true{{ else }}prognosis-tag-false{{ end }} is-hidden-tablet">
  <span class="is-size-4 is-size-6-mobile">–ü—Ä–æ–≥–Ω–æ–∑:&nbsp;</span>
  {{ if . }}
  <i class="bi-check-circle-fill is-size-2 is-size-4-mobile"></i>
  {{ else }}
  <i class="bi-x-circle-fill is-size-2 is-size-4-mobile"></i>
  {{ end }}
</span>
{{ end }}